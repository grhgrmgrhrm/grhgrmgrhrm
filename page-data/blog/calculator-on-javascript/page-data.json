{"componentChunkName":"component---src-layout-post-layout-js","path":"/blog/calculator-on-javascript","result":{"data":{"markdownRemark":{"frontmatter":{"slug":"calculator-on-javascript","title":"Калькулятор на JavaScript","description":"Калькулятор - прекрасная задача для тренировки начинающего программиста.","date":"2020-01-14T00:00:00.000Z"},"html":"<h2>&#x41F;&#x438;&#x448;&#x435;&#x43C; &#x441;&#x432;&#x43E;&#x439; &#x43A;&#x430;&#x43B;&#x44C;&#x43A;&#x443;&#x43B;&#x44F;&#x442;&#x43E;&#x440; &#x43D;&#x430; JavaScript</h2>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/66fc4eeee57902aa17e3d140b8dd3be3/97990/calc.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 39.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEDBf/EABcBAAMBAAAAAAAAAAAAAAAAAAABAwT/2gAMAwEAAhADEAAAAdKowUgI/8QAGBABAAMBAAAAAAAAAAAAAAAAAQACAxL/2gAIAQEAAQUCZopMW3H/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAWEQEBAQAAAAAAAAAAAAAAAAAAAjH/2gAIAQIBAT8BVr//xAAbEAACAQUAAAAAAAAAAAAAAAABEQACIjFBYf/aAAgBAQAGPwLMpAbehLmez//EABoQAQACAwEAAAAAAAAAAAAAAAEAIRExQXH/2gAIAQEAAT8hLnIvItZB0qOoYduz/9oADAMBAAIAAwAAABD8H//EABcRAQADAAAAAAAAAAAAAAAAAAABMUH/2gAIAQMBAT8QxFP/xAAZEQACAwEAAAAAAAAAAAAAAAAAIQERMUH/2gAIAQIBAT8QU0uGh//EABsQAQACAgMAAAAAAAAAAAAAAAERIQAxYXGB/9oACAEBAAE/EFAmEo03hxSZUEdy68x+PUhjUsEEOO7z/9k=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"&#x41F;&#x438;&#x448;&#x435;&#x43C; &#x441;&#x432;&#x43E;&#x439; &#x43A;&#x430;&#x43B;&#x44C;&#x43A;&#x443;&#x43B;&#x44F;&#x442;&#x43E;&#x440; &#x43D;&#x430; JavaScript\" title=\"&#x41F;&#x438;&#x448;&#x435;&#x43C; &#x441;&#x432;&#x43E;&#x439; &#x43A;&#x430;&#x43B;&#x44C;&#x43A;&#x443;&#x43B;&#x44F;&#x442;&#x43E;&#x440; &#x43D;&#x430; JavaScript\" src=\"/static/66fc4eeee57902aa17e3d140b8dd3be3/4b190/calc.jpg\" srcset=\"/static/66fc4eeee57902aa17e3d140b8dd3be3/e07e9/calc.jpg 200w,\n/static/66fc4eeee57902aa17e3d140b8dd3be3/066f9/calc.jpg 400w,\n/static/66fc4eeee57902aa17e3d140b8dd3be3/4b190/calc.jpg 800w,\n/static/66fc4eeee57902aa17e3d140b8dd3be3/e5166/calc.jpg 1200w,\n/static/66fc4eeee57902aa17e3d140b8dd3be3/b17f8/calc.jpg 1600w,\n/static/66fc4eeee57902aa17e3d140b8dd3be3/97990/calc.jpg 2375w\" sizes=\"(max-width: 800px) 100vw, 800px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span><br>\n&#x421;&#x43E;&#x437;&#x434;&#x430;&#x435;&#x43C; &#x441;&#x43E;&#x431;&#x441;&#x442;&#x432;&#x435;&#x43D;&#x43D;&#x44B;&#x439; &#x43A;&#x430;&#x43B;&#x44C;&#x43A;&#x443;&#x43B;&#x44F;&#x442;&#x43E;&#x440; &#x43D;&#x430; JavaScript &#x441; &#x43F;&#x43E;&#x43C;&#x43E;&#x449;&#x44C;&#x44E; JS, HTML &#x438; CSS.<br>\n&#x412;&#x43D;&#x430;&#x447;&#x430;&#x43B;&#x435;, &#x43A;&#x430;&#x43A; &#x433;&#x43E;&#x432;&#x43E;&#x440;&#x438;&#x442;&#x441;&#x44F;, &#x431;&#x44B;&#x43B;&#x430; &#x438;&#x434;&#x435;&#x44F;, &#x442;&#x43E; &#x435;&#x441;&#x442;&#x44C; &#x422;&#x417; &#x441;&#x430;&#x43C;&#x43E;&#x43C;&#x443; &#x441;&#x435;&#x431;&#x435; - &#x43D;&#x430;&#x43F;&#x438;&#x441;&#x430;&#x442;&#x44C; &#x43A;&#x430;&#x43B;&#x44C;&#x43A;&#x443;&#x43B;&#x44F;&#x442;&#x43E;&#x440; &#x43D;&#x430; &#x447;&#x438;&#x441;&#x442;&#x43E;&#x43C; JS, &#x447;&#x442;&#x43E;&#x431;&#x44B; &#x43A;&#x43E;&#x43B;&#x438;&#x447;&#x435;&#x441;&#x442;&#x432;&#x43E; &#x43A;&#x43E;&#x434;&#x430; &#x431;&#x44B;&#x43B;&#x43E; &#x43C;&#x438;&#x43D;&#x438;&#x43C;&#x430;&#x43B;&#x44C;&#x43D;&#x44B;&#x43C;.<br>\n&#x41D;&#x443;, &#x438; &#x43A;&#x43E;&#x43D;&#x435;&#x447;&#x43D;&#x43E;, &#x447;&#x442;&#x43E;&#x431;&#x44B; &#x43A;&#x430;&#x43B;&#x44C;&#x43A;&#x443;&#x43B;&#x44F;&#x442;&#x43E;&#x440; &#x432;&#x44B;&#x433;&#x43B;&#x44F;&#x434;&#x438;&#x43B; &#x43F;&#x440;&#x438;&#x43B;&#x438;&#x447;&#x43D;&#x43E;. <br> \n&#x418;&#x442;&#x430;&#x43A;, &#x43F;&#x43E;&#x435;&#x445;&#x430;&#x43B;&#x438;.\n<p>Поскольку экран и кнопки на калькуляторе находятся не подряд друг за другом, то разделим наш калькулятор не несколько областей:</p>\n<ol>\n<li>Область ввода данных. За эту область будет отвечать текстовое поле &#x3C; input >;</li>\n<li>Область цифровых кнопок 0-9;</li>\n<li>Область функциональных кнопок: +, /, *, =, AC;</li>\n<li>Кнопка подсчета операции</li>\n</ol>\n<p>Теперь попробуем все эти области отобразить в коде:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;textarea id=result&gt;0&lt;/textarea&gt;\n&lt;button&gt;1&lt;/button&gt;\n&lt;button&gt;2&lt;/button&gt;\n&lt;button&gt;3&lt;/button&gt;\n&lt;button&gt;4&lt;/button&gt;\n&lt;button&gt;5&lt;/button&gt;\n&lt;button&gt;6&lt;/button&gt;\n&lt;button&gt;7&lt;/button&gt;\n&lt;button&gt;8&lt;/button&gt;\n&lt;button&gt;9&lt;/button&gt;\n&lt;button&gt;0&lt;/button&gt;\n&lt;button&gt;+&lt;/button&gt;\n&lt;button&gt;-&lt;/button&gt;\n&lt;button&gt;*&lt;/button&gt;\n&lt;button&gt;/&lt;/button&gt;\n&lt;button&gt;=&lt;/button&gt;\n&lt;button&gt;C&lt;/button&gt;\n&lt;button&gt;#&lt;/button&gt;</code></pre></div>\n<p>Немного громоздко. А если представить, что кнопок будет 200-300, то такой код будет просто лесом одиковых строк с минимальными различиями. Это выглядит не очень хорошо.\nДобавим для этого кода обёртку div и немного css</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;div id=&quot;calc&quot;&gt;\n  &lt;textarea id=result&gt;0&lt;/textarea&gt;\n  &lt;button&gt;1&lt;/button&gt;\n  ...\n&lt;/div&gt;</code></pre></div>\n<p>Посмотреть вживую - здесь: <a href=\"https://jsfiddle.net/raman_shastapalau/hpvkos30/2/\">https://jsfiddle.net/raman_shastapalau/hpvkos30/2/</a></p>\n<p>Все равно, получается громоздко. Чтобы уменьшить количество кода, воспользуемся div-ами, в которые будем возвращать данные из массивов. И облагородим всё это с помощью css</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;div id=&quot;wrap&quot;&gt;\n    &lt;div id=&quot;calc&quot;&gt;\n      &lt;textarea id=&quot;result&quot;&gt;0&lt;/textarea&gt;\n      &lt;div id=&quot;numpad&quot;&gt;\n        &lt;div id=&quot;buttonNum&quot;&gt;&lt;/div&gt;\n        &lt;div id=&quot;buttonOper&quot;&gt;&lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div id=&quot;buttonCalc&quot;&gt;&lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;</code></pre></div>\n<p>Вот что получилось - каркас калькулятора. Пока еще без кнопок, ну разве что с макетом кнопки \"=\"<br>\n<a href=\"https://jsfiddle.net/raman_shastapalau/hpvkos30/4/\">https://jsfiddle.net/raman_shastapalau/hpvkos30/4/</a> <br>\nВ массивы мы положим все кнопки - цифры, функциональные и кнопку \"=\"\". Кнопки &#x3C; button >1&#x3C;/ button > вообще можем убрать - их чуть ниже добавим с помощью JS</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let buttons = [&#39;7&#39;, &#39;8&#39;, &#39;9&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;.&#39;, &#39;0&#39;,&#39;AC&#39;];\nlet operations = [&#39;/&#39;, &#39;*&#39;, &#39;-&#39;, &#39;+&#39;];\nlet calculations = [&#39;=&#39;];</code></pre></div>\n<p>И с помощью метода getElementById будем возвращать необходимые данные в документ со следующими id: buttonCalc и result</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let textArea = document.getElementById(&#39;result&#39;);\nlet calculation = document.getElementById(&#39;buttonCalc&#39;);</code></pre></div>\n<p>Теперь, пройдемся по массиву buttons с помощью метода forEach и затем будем отрисовывать кнопки, оборачивая их в div, добавляя класс btn.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">buttons.forEach(function (button) {\n    let buttonElement = document.createElement(&#39;div&#39;);\n    buttonElement.className = &#39;btn&#39;;\n    buttonElement.innerHTML = button;\n    buttonNum.appendChild(buttonElement);\n});</code></pre></div>\n<p>Далее пройдемся по массивам с функциолальными кнопками и кнопке \"=\"</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">operations.forEach(function (operation) {\n    let operationElement = document.createElement(&#39;div&#39;);\n    operationElement.className = &#39;operation&#39;;\n    operationElement.innerHTML = operation;\n    buttonOper.appendChild(operationElement);\n});\n\ncalculations.forEach(function (calculation) {\n    let calculationElement = document.createElement(&#39;div&#39;);\n    calculationElement.className = &#39;calculation&#39;;\n    calculationElement.innerHTML = calculation;\n    buttonCalc.appendChild(calculationElement);\n});</code></pre></div>\n<p>И затем с помощью метода querySelectorAll пройдемся по всему документу, найдем #wrap .btn</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">document.querySelectorAll(&#39;#wrap .btn&#39;).forEach(function (button) {\n\n        button.addEventListener(&#39;click&#39;, onButtonClick);\n    });</code></pre></div>\n<p>Вот что в итоге получилось - вывели данные из массива в div элементы: <a href=\"https://jsfiddle.net/raman_shastapalau/hpvkos30/5/\">https://jsfiddle.net/raman_shastapalau/hpvkos30/5/</a> <br>\nКнопки правда не работают, но для этого нужно написать обработчик событий на нажание кнопки с помощью onButtonClick. Поскольку пишем калькулятор, то в нем возможно несколько нажатий функциональных кнопок. Поэтому пройдемся по вариантам нажатий кнопок с помощью else if</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function onButtonClick(e) {\n        // e - MouseEvent (получает информацию о клике)\n        if (e.target.innerHTML === &#39;c&#39;) {\n            // При нажатии кнопки &quot;с&quot;, стирается все из текстового поля\n            textArea.innerHTML = &#39;0&#39;;\n        } else if (e.target.innerHTML === &#39;=&#39;) {\n            // При нажатии кнопки &quot;=&quot;, происходит вычисление значения с помощью eval\n            textArea.innerHTML = eval(textArea.innerHTML);\n        } else if (textArea.innerHTML === &#39;0&#39;) {\n            // Если textarea содержит только &quot;0&quot;, то стереть &quot;0&quot; и записать значения кнопки в текстовое поле\n            textArea.innerHTML = e.target.innerHTML;\n        } else {\n            // Добавление значения кнопки в текстовое поле\n            textArea.innerHTML += e.target.innerHTML;\n        }\n    }</code></pre></div>\n<p>Вот в принципе и все, смотрим результат по ссылке: <a href=\"https://jsfiddle.net/raman_shastapalau/hpvkos30/7/\">https://jsfiddle.net/raman_shastapalau/hpvkos30/7/</a> <br>\nЕсли не нравится расположение кнопок калькулятора - меняйте их в массиве. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let buttons = [&#39;7&#39;, &#39;8&#39;, &#39;9&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;.&#39;, &#39;0&#39;,&#39;AC&#39;];</code></pre></div>\n<p>Не забывайте подключить скрипт внизу страницы, иначе работать не будет.<br></p>\n<p>Скачать исходники можете здесь -  <a href=\"https://github.com/grhgrmgrhrm/calculator-on-JS\">https://github.com/grhgrmgrhrm/calculator-on-JS</a></p>"}},"pageContext":{"slug":"calculator-on-javascript"}},"staticQueryHashes":["2837053904","3706524088"]}